/* Global settings */
html, body {
    width: 100%; /* Full viewport width */
    height: 100%; /* Full viewport height */
    margin: 0;
    padding: 0;
    overflow: hidden;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #333;
    line-height: 1.6;
}

body {
    background-color: #f4f4f4; /* Existing background */
    /* display: flex; align-items: center; justify-content: center; /* REMOVED for full screen */
}

/* Game Container - Full screen */
.game-container {
    width: 100vw; /* Full viewport width */
    height: 100vh; /* Full viewport height */
    border: none; /* REMOVED border: 2px solid #333; */
    /* margin: auto; /* REMOVED */
    position: relative;
    box-sizing: border-box;
    display: flex;
    flex-wrap: wrap;
    background-color: #f0f0f0; /* Light gray background for the whole game area */
}

/* Child elements of .game-container */
#left-tabs-container {
    order: 1;
    width: 15%;
    height: 80vh; /* Adjusted for actions-tab taking 20vh */
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
    background-color: #e0e0e0; /* Background for the container itself */
    border-right: 1px solid #777; /* Separator line */
}

#stats-tab, #info-tab {
    width: 100%;
    flex: 1; /* Distribute space equally within left-tabs-container */
    /* background-color: #e0e0e0; /* Moved to parent #left-tabs-container */
    /* border: 1px solid #999; /* REMOVED individual borders */
    padding: 0;
    box-sizing: border-box;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

#info-tab {
    border-top: 1px solid #777; /* Separator within left tabs, slightly softer */
}

#map-container {
    order: 2;
    flex-grow: 1; /* Takes remaining width (approx 70%) */
    height: 80vh; /* Adjusted height */
    /* border: 1px solid #666; /* REMOVED in favor of container borders */
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 5px; /* Keep padding for SVG */
    box-sizing: border-box;
    background-color: #ffffff; /* White background for map area */
    border-right: 1px solid #777; /* Separator line */
}

#map-container svg {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

#inventory-tab {
    order: 3;
    width: 15%;
    height: 80vh; /* Adjusted height */
    background-color: #e0e0e0; /* Background for the container itself */
    /* border: 1px solid #999; /* REMOVED individual borders */
    padding: 0;
    box-sizing: border-box;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    /* border-left: 1px solid #999; /* REMOVED as map-container has border-right */
}

#actions-tab {
    order: 4;
    width: 100%;
    height: 20vh; /* Use viewport height for this panel */
    background-color: #c0c0c0;
    /* border: 1px solid #888; /* REMOVED individual border */
    border-top: 1px solid #555; /* Stronger separator from content above */
    padding: 0;
    box-sizing: border-box;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

/* Common styles for all tab types (stats, info, inventory, actions) */
#stats-tab, #info-tab, #inventory-tab, #actions-tab {
    /* Common properties already defined above or per specific ID */
}

.actions-tab-active .tab-title-bar { /* This is for JS interactivity, keep it */
    background-color: #a8d5e2; /* Highlight color for active tab */
    font-weight: bold;
}

/* Settings Menu Button and Popup */
#top-right-menu-button {
    position: absolute;
    top: 5px; /* Adjusted for aesthetics */
    right: 5px; /* Adjusted for aesthetics */
    width: auto; /* Fit content */
    padding: 5px 10px; /* Padding for button */
    height: auto;
    background-color: #f0f0f0;
    border: 1px solid #aaa;
    z-index: 1000; /* Ensure it's above other content */
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border-radius: 4px;
}

#settings-popup {
    display: none;
    position: absolute;
    top: 35px; /* Position below button */
    right: 5px;
    width: 180px; /* Slightly narrower */
    background-color: #fff;
    border: 1px solid #aaa;
    padding: 0;
    box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    z-index: 1001; /* Above button */
    border-radius: 4px;
}

#settings-popup ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
}

#settings-popup li {
    padding: 8px 12px; /* Adjusted padding */
    cursor: pointer;
    border-bottom: 1px solid #eee;
    font-size: 0.9em; /* Consistent font size */
}

#settings-popup li:last-child {
    border-bottom: none;
}

#settings-popup li:hover {
    background-color: #f5f5f5;
}

#settings-popup a {
    text-decoration: none;
    color: inherit;
    display: block;
}

/* Styling for text within SVG map elements */
#map-container svg text {
    font-weight: bold;
    font-size: 10px; /* Example size, adjust as needed */
    fill: #333;
}


/* Tab Titles and Content Area Styling */
.tab-title-bar {
    padding: 5px 8px; /* Adjusted padding */
    background-color: #d0d0d0;
    border-bottom: 1px solid #999;
    text-align: center;
    font-weight: bold;
    font-size: 0.85em; /* Slightly increased font size */
    box-sizing: border-box;
    flex-shrink: 0;
    cursor: default; /* Default cursor for non-interactive titles */
}

#actions-tab .tab-title-bar {
    cursor: pointer; /* Clickable title for actions tab */
}

.tab-content {
    /* display: none; /* REMOVED for hover tabs. JS still hides #actions-content initially */
    padding: 8px; /* Consistent padding */
    /* border: 1px dashed #777; /* Kept for now */
    margin-top: 0; /* No margin, spacing handled by padding */
    background-color: #f9f9f9;
    height: 100%; /* Fill the parent tab area */
    overflow-y: auto; /* Scroll if content overflows */
    box-sizing: border-box;
    flex-grow: 1; /* Ensure it takes available space in flex column */
}

/* Specifics for #actions-content (which also has .tab-content class) */
/* This will be click-toggled, so it needs display:none initially */
#actions-content {
    display: none; /* Initially hidden, JS toggles to display:flex */
    flex-direction: row; /* This is applied when JS makes it visible */
    gap: 8px;
    padding: 8px; /* Consistent padding */
}

/* Add overflow:hidden to tab containers */
#stats-tab, #info-tab, #inventory-tab {
    overflow: hidden;
}

/* Styling for the actual content of hoverable tabs */
#stats-content, #info-content, #inventory-content {
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.35s ease-in-out, transform 0.35s ease-in-out, visibility 0s linear 0.35s;
    /* Inherits other styles like padding, background, height:100% from .tab-content */
}

/* Initial off-screen positions */
#stats-content, #info-content {
    transform: translateX(-100%);
}

#inventory-content {
    transform: translateX(100%);
}

/* Hover states to bring content into view */
#stats-tab:hover #stats-content,
#info-tab:hover #info-content,
#inventory-tab:hover #inventory-content {
    transform: translateX(0);
    opacity: 1;
    visibility: visible;
    transition-delay: 0s; /* Ensure visibility transition applies correctly on hover */
}


#actions-content > .log-box { /* This is for the game log within actions tab */
    flex: 1 1 40%; /* Takes ~40% of the actions tab content width */
    margin-bottom: 0; /* No margin as it's part of flex layout */
    height: 100%; /* Fill height of #actions-content */
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
    background-color: #fff; /* Distinct background */
    border: 1px solid #ccc;
    border-radius: 4px;
    padding: 6px;
}
#actions-content > .log-box #game-output {
    white-space: pre-wrap;
    border: 1px solid #ddd; /* Lighter border */
    padding: 5px;
    overflow-y: auto;
    background-color: #fdfdfd; /* Slightly off-white */
    font-family: 'Courier New', Courier, monospace;
    font-size: 0.9em;
    color: #2c3e50;
    flex-grow: 1; /* Takes available vertical space */
    min-height: 30px; /* Minimum height */
    border-radius: 3px;
}


#action-controls-wrapper { /* Container for various action forms/buttons */
    flex: 1 1 58%; /* Takes ~58% of the actions tab content width */
    overflow-y: auto; /* Scroll if content overflows */
    height: 100%; /* Fill height of #actions-content */
    padding: 8px; /* Consistent padding */
    border: 1px solid #b0b0b0;
    background-color: #fdfdfd;
    box-sizing: border-box;
    border-radius: 4px;
    scrollbar-width: thin;
    scrollbar-color: #999 #e0e0e0;
}

#action-controls-wrapper::-webkit-scrollbar {
    width: 8px;
}
#action-controls-wrapper::-webkit-scrollbar-track {
    background: #e0e0e0;
    border-radius: 4px;
}
#action-controls-wrapper::-webkit-scrollbar-thumb {
    background-color: #999;
    border-radius: 4px;
    border: 2px solid #e0e0e0;
}
#action-controls-wrapper::-webkit-scrollbar-thumb:hover {
    background-color: #777;
}

/* Styles for sections within #action-controls-wrapper (e.g., world map, current location) */
#action-controls-wrapper .action-box-section {
    background-color: #fff; /* Cleaner background */
    border: 1px solid #ddd; /* Softer border */
    border-radius: 4px; /* Rounded corners */
    padding: 8px; /* Consistent padding */
    margin-bottom: 8px; /* Spacing between sections */
    box-shadow: 0 1px 2px rgba(0,0,0,0.05); /* Subtle shadow */
}
#action-controls-wrapper .action-box-section:last-child {
    margin-bottom: 0; /* No margin for the last section */
}


/* General form styling, adapted for #action-controls-wrapper context */
#action-controls-wrapper form div {
    margin-bottom: 8px;
}

#action-controls-wrapper label {
    display: block;
    margin-bottom: 4px;
    font-weight: bold;
    font-size: 0.8em; /* Slightly smaller labels */
}

#action-controls-wrapper input[type="text"],
#action-controls-wrapper input[type="number"] {
    width: calc(100% - 16px); /* Adjust for padding */
    padding: 6px 8px; /* Smaller padding */
    border: 1px solid #ccc;
    border-radius: 3px;
    box-sizing: border-box;
    margin-bottom: 8px; /* Consistent margin */
    font-size: 0.85em;
}

#action-controls-wrapper input[type="submit"],
#action-controls-wrapper .submit-details-button, /* Generic class for submit buttons */
#action-controls-wrapper .map-destination-button,
#action-controls-wrapper .sub-location-button,
#action-controls-wrapper .action-button,
#action-controls-wrapper .general-action-button { /* General class for other buttons */
    background-color: #5cb85c;
    color: white;
    padding: 6px 10px; /* Adjusted padding */
    border: none;
    border-radius: 3px;
    cursor: pointer;
    font-size: 0.85em; /* Consistent font size */
    margin-right: 5px; /* Spacing for multiple buttons */
    margin-bottom: 5px;
    text-align: center; /* Center text in buttons */
}
#action-controls-wrapper input[type="submit"]:hover,
#action-controls-wrapper .submit-details-button:hover,
#action-controls-wrapper .map-destination-button:hover,
#action-controls-wrapper .sub-location-button:hover,
#action-controls-wrapper .action-button:hover,
#action-controls-wrapper .general-action-button:hover {
    opacity: 0.9; /* Slight hover effect */
}

/* Specific button type styling */
#action-controls-wrapper .map-destination-button { background-color: #007bff; }
#action-controls-wrapper .sub-location-button { background-color: #28a745; }
#action-controls-wrapper .action-button { background-color: #ffc107; color: #333; }
#action-controls-wrapper .submit-details-button { background-color: #17a2b8; }
#action-controls-wrapper .general-action-button { background-color: #6c757d; }


#action-controls-wrapper ul {
    list-style-type: none;
    padding-left: 0;
    margin-top: 4px;
    margin-bottom: 8px;
}

#action-controls-wrapper ul li {
    padding: 2px 0;
    font-size: 0.85em;
}

#action-controls-wrapper hr {
    border: 0;
    height: 1px;
    background: #eee; /* Lighter hr */
    margin: 15px 0; /* Reduced margin */
}

/* Headings within #action-controls-wrapper */
#action-controls-wrapper h1, /* If any h1 are used */
#action-controls-wrapper h2,
#action-controls-wrapper h3,
#action-controls-wrapper h4 {
    color: #333;
    margin-top: 0; /* Remove default top margin */
    margin-bottom: 8px; /* Consistent bottom margin */
    padding-bottom: 4px; /* Space before border */
    border-bottom: 1px solid #eee; /* Subtle separator */
}
#action-controls-wrapper h1 { font-size: 1.2em; }
#action-controls-wrapper h2 { font-size: 1.1em; }
#action-controls-wrapper h3 { font-size: 1.0em; }
#action-controls-wrapper h4 { font-size: 0.9em; border-bottom: none; margin-bottom: 4px;} /* No border for h4 */

#action-controls-wrapper #current-town-display {
    font-weight: bold;
    color: #28a745;
    font-size: 0.9em;
}
#action-controls-wrapper .sub-location-description {
    font-size: 0.8em;
    color: #555;
    margin-left: 10px;
    display: block;
}
#action-controls-wrapper input[type="hidden"] {
    display: none;
}

/* Details section within action controls */
#action-controls-wrapper #action-details-container { /* If this specific ID is still used */
    border-top: 1px dashed #ccc; /* Lighter border */
    padding-top: 10px;
    margin-top: 10px;
}
#action-controls-wrapper .hidden-details { display: none; }
#action-controls-wrapper .details-section { /* Generic class for sections like buy/sell forms */
    background-color: #fdfdfd; /* Slightly off-white */
    border: 1px solid #e0e0e0;
    border-radius: 3px;
    padding: 10px; /* Consistent padding */
    margin-top: 8px;
}
#action-controls-wrapper .details-section h4 {
    margin-bottom: 8px; /* Space after heading in details section */
    font-size: 0.9em;
    border-bottom: 1px solid #f0f0f0;
    padding-bottom: 4px;
}
#action-controls-wrapper .details-section label {
    font-size: 0.8em;
}


/* Content styling for Stats, Info, Inventory tabs */
#stats-content h2, #info-content h2, #inventory-content h2:first-child {
    font-size: 1.0em;
    margin-top: 0;
    margin-bottom: 8px;
    color: #333;
    text-align: left;
    padding: 2px 0;
    border-bottom: 1px solid #ddd;
}
#inventory-content h2 { /* Subsequent h2 in inventory */
    font-size: 1.0em;
    margin-top: 10px;
    margin-bottom: 6px;
    border-bottom: 1px solid #ddd;
    padding-bottom: 3px;
}

#stats-content p, #info-content p, #inventory-content p {
    font-size: 0.85em; /* Slightly smaller text */
    margin: 4px 0;
    color: #444;
    text-align: left;
    word-wrap: break-word;
}

#stats-content ul, #info-content ul, #inventory-content ul {
    padding-left: 10px; /* Indent list */
    margin-bottom: 8px;
    list-style-type: disc; /* Use standard bullets */
}

#stats-content li, #info-content li, #inventory-content li {
    font-size: 0.8em; /* Smaller list item text */
    padding: 1px 0;
    color: #555;
    text-align: left;
    word-wrap: break-word;
    margin-bottom: 2px; /* Space between list items */
}

#inventory-content p.empty-message { /* For "Inventory is empty" type messages */
    font-style: italic;
    color: #777;
}

/* Remove duplicated/obsolete general rules */
/* The old .container, .log-action-container etc. are assumed to be removed from HTML or will be styled if used within tabs */
/* The specific #stats-tab, #inventory-tab, #actions-tab fixed px widths from older versions are removed */
/* The multiple html, body definitions are consolidated at the top */
/* The multiple .game-container definitions are consolidated */
