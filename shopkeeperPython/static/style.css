/* Global settings */
html, body {

    width: 100%; /* Full viewport width */
    height: 100%; /* Full viewport height */
    margin: 0;
    padding: 0;
    overflow: hidden;

    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #333;
    line-height: 1.6;
}

body {

    background-color: #f4f4f4; /* Existing background */
    /* display: flex; align-items: center; justify-content: center; /* REMOVED for full screen */
}

/* Game Container - Full screen */
.game-container {
    width: 100vw; /* Full viewport width */
    height: 100vh; /* Full viewport height */
    border: none; /* REMOVED border: 2px solid #333; */
    /* margin: auto; /* REMOVED */
    position: relative;
    box-sizing: border-box;
    display: flex;
    flex-wrap: wrap;
    background-color: #f0f0f0; /* Light gray background for the whole game area */
}

/* Child elements of .game-container */
#left-tabs-container {
    order: 1;
    width: 15%;
    height: 80vh; /* Adjusted for actions-tab taking 20vh */
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
    background-color: #e0e0e0; /* Background for the container itself */
    border-right: 1px solid #777; /* Separator line */

}

#stats-tab, #info-tab {
    width: 100%;
    flex: 1; /* Distribute space equally within left-tabs-container */

    /* background-color: #e0e0e0; /* Moved to parent #left-tabs-container */
    /* border: 1px solid #999; /* REMOVED individual borders */

    padding: 0;
    box-sizing: border-box;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

#info-tab {

    border-top: 1px solid #777; /* Separator within left tabs, slightly softer */

}

#map-container {
    order: 2;

    flex-grow: 1; /* Takes remaining width (approx 70%) */
    height: 80vh; /* Adjusted height */
    /* border: 1px solid #666; /* REMOVED in favor of container borders */

    display: flex;
    align-items: center;
    justify-content: center;
    padding: 5px; /* Keep padding for SVG */
    box-sizing: border-box;

    background-color: #ffffff; /* White background for map area */
    border-right: 1px solid #777; /* Separator line */

}

#map-container svg {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

#inventory-tab {
    order: 3;

    width: 15%;
    height: 80vh; /* Adjusted height */
    background-color: #e0e0e0; /* Background for the container itself */
    /* border: 1px solid #999; /* REMOVED individual borders */
    padding: 0;
    box-sizing: border-box;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    /* border-left: 1px solid #999; /* REMOVED as map-container has border-right */
}

#actions-tab {
    /* order: 4; */ /* Removed for absolute positioning */
    width: 100%;
    /* height: 20vh; */ /* Removed, height now determined by content */
    background-color: #c0c0c0;
    /* border: 1px solid #888; /* REMOVED individual border */
    border-top: 1px solid #555; /* Stronger separator from content above */

    padding: 0;
    box-sizing: border-box;
    position: absolute; /* Changed from relative */
    bottom: 0; /* Added */
    left: 0; /* Added */
    z-index: 20; /* Added */
    overflow: hidden;
    display: flex;
    flex-direction: column;
    /* border-left: 1px solid #999; */ /* Removed as it might be irrelevant */
}

/* New styles for Actions/Log Tabs */
.actions-log-tab-buttons {
    display: flex;
    flex-shrink: 0; /* Prevent shrinking if content below is too large */
}

#actions-tab-button, #log-tab-button {
    flex-grow: 1; /* Each button takes equal width */
    padding: 8px 5px; /* Adjusted padding */
    background-color: #b0b0b0; /* Slightly lighter than #actions-tab bg */
    border-bottom: 1px solid #888; /* Separator from content */
    text-align: center;
    font-weight: bold;
    font-size: 0.85em;
    cursor: pointer;
    transition: background-color 0.3s ease;
    border-right: 1px solid #888; /* Separator between buttons */
}

#log-tab-button {
    border-right: none; /* No right border for the last button */
}

#actions-tab-button:hover, #log-tab-button:hover {
    background-color: #a0a0a0;
}

.active-tab-button {
    background-color: #f9f9f9 !important; /* Same as .tab-content bg for seamless look */
    color: #333;
    border-bottom: 1px solid #f9f9f9 !important; /* Make it look like it's part of the content area */
}


/* Common styles for all tab types (stats, info, inventory, actions) */
#stats-tab, #info-tab, #inventory-tab, #actions-tab {
    /* Common properties already defined above or per specific ID */
}

/* REMOVE: .actions-tab-active .tab-title-bar - This is replaced by .active-tab-button */

/* Settings Menu Button and Popup */
#top-right-menu-button {
    position: absolute;
    top: 5px; /* Adjusted for aesthetics */
    right: 5px; /* Adjusted for aesthetics */
    width: auto; /* Fit content */
    padding: 5px 10px; /* Padding for button */
    height: auto;
    background-color: #f0f0f0;
    border: 1px solid #aaa;
    z-index: 1000; /* Ensure it's above other content */
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border-radius: 4px;
}

#settings-popup {
    display: none;
    position: absolute;
    top: 35px; /* Position below button */
    right: 5px;
    width: 180px; /* Slightly narrower */
    background-color: #fff;
    border: 1px solid #aaa;
    padding: 0;
    box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    z-index: 1001; /* Above button */
    border-radius: 4px;
}

#settings-popup ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
}

#settings-popup li {
    padding: 8px 12px; /* Adjusted padding */
    cursor: pointer;
    border-bottom: 1px solid #eee;
    font-size: 0.9em; /* Consistent font size */
}

#settings-popup li:last-child {
    border-bottom: none;
}

#settings-popup li:hover {
    background-color: #f5f5f5;
}

#settings-popup a {
    text-decoration: none;
    color: inherit;
    display: block;
}

/* Styling for text within SVG map elements */
#map-container svg text {
    font-weight: bold;
    font-size: 10px; /* Example size, adjust as needed */
    fill: #333;
}


/* Tab Titles and Content Area Styling */
.tab-title-bar {
    padding: 5px 8px; /* Adjusted padding */
    background-color: #d0d0d0;
    border-bottom: 1px solid #999;
    text-align: center;
    font-weight: bold;
    font-size: 0.85em; /* Slightly increased font size */
    box-sizing: border-box;
    flex-shrink: 0;
    cursor: default; /* Default cursor for non-interactive titles */
}

/* REMOVE: #actions-tab .tab-title-bar - This element is gone */

.tab-content {
    /* display: none; /* REMOVED for hover tabs. JS still hides #actions-content initially */
    padding: 8px; /* Consistent padding */
    /* border: 1px dashed #777; /* Kept for now */
    margin-top: 0; /* No margin, spacing handled by padding */
    background-color: #f9f9f9;
    height: 100%; /* Fill the parent tab area */
    overflow-y: auto; /* Scroll if content overflows */
    box-sizing: border-box;
    flex-grow: 1; /* Ensure it takes available space in flex column */
}

/* Specifics for #actions-content (which also has .tab-content class) */
#actions-content {
    display: block; /* Changed from none/flex, visibility now controlled by panels */
    /* flex-direction: row; /* Not needed if panels stack vertically */
    /* gap: 8px; /* Not needed if panels stack vertically */
    /* padding: 8px; /* Padding will be on panels if needed, or keep if desired for overall content area */
    height: auto; /* Was calc(100% - 35px) */
    overflow: hidden; /* To contain the sliding panels */
    position: relative; /* For positioning panels if needed, though max-height should handle it */

}

#actions-panel-content, #log-panel-content {
    width: 100%; /* Take full width of #actions-content */
    height: 100%; /* Take full height of #actions-content when visible */
    background-color: #f9f9f9; /* Match tab-content bg */
    overflow: hidden; /* Important for max-height transition */
    max-height: 0; /* Initially hidden */
    transition: max-height 0.5s ease-in-out;
    box-sizing: border-box; /* Include padding/border in height */
}

#actions-panel-content.panel-visible,
#log-panel-content.panel-visible {
    max-height: 40vh; /* Changed from calc(20vh - 35px) */
    /* If content inside panels needs scrolling, add overflow-y: auto; here
       and ensure #action-controls-wrapper and .log-box don't have fixed height:100%
       if this parent has overflow-y: auto as well.
       For now, assuming content fits or internal elements scroll.
    */
}

/* Ensure the direct children of panels can fill the space */
#actions-panel-content > #action-controls-wrapper,
#log-panel-content > .log-box {
    height: 100%; /* Fill the visible height of the panel */
    overflow-y: auto; /* Allow scrolling within these if content exceeds panel height */
}



/* Add overflow:hidden to tab containers */
#stats-tab, #info-tab, #inventory-tab {
    overflow: hidden;
}

/* Styling for the actual content of hoverable tabs */
#stats-content, #info-content, #inventory-content {
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.35s ease-in-out, transform 0.35s ease-in-out, visibility 0s linear 0.35s;
    /* Inherits other styles like padding, background, height:100% from .tab-content */
    position: absolute;
    top: 0;
    width: 100%;
    height: 100%;
    z-index: 5; /* Lowered z-index for non-hovered state */
}

/* Initial off-screen positions */
#stats-content, #info-content {
    transform: translateX(-100%);
    left: 0; /* Added left: 0; */
}

#inventory-content {
    transform: translateX(100%);
    left: 0; /* Added left: 0; per instructions (was right: 0 initially) */
}

/* Hover states to bring content into view */
#stats-tab:hover #stats-content,
#info-tab:hover #info-content,
#inventory-tab:hover #inventory-content {
    transform: translateX(0);
    opacity: 1;
    visibility: visible;
    transition-delay: 0s; /* Ensure visibility transition applies correctly on hover */
    z-index: 25; /* Higher z-index on hover to go above actions tab */
}


#actions-content > .log-box { /* This is for the game log within actions tab */
    flex: 1 1 40%; /* Takes ~40% of the actions tab content width */
    margin-bottom: 0; /* No margin as it's part of flex layout */
    height: 100%; /* Fill height of #actions-content */
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
    background-color: #fff; /* Distinct background */
    border: 1px solid #ccc;
    border-radius: 4px;
    padding: 6px;
}
#actions-content > .log-box #game-output { /* This selector is fine as .log-box is inside #actions-content */
    white-space: pre-wrap;
    border: 1px solid #ddd; /* Lighter border */
    padding: 5px;
    overflow-y: auto;
    background-color: #fdfdfd; /* Slightly off-white */
    font-family: 'Courier New', Courier, monospace;
    font-size: 0.9em;
    color: #2c3e50;
    flex-grow: 1; /* Takes available vertical space */
    /* height: 300px; /* REMOVE fixed height */
    min-height: 50px; /* Adjusted minimum height */
    border-radius: 3px;
}


#action-controls-wrapper { /* Container for various action forms/buttons */
    flex: 1 1 58%; /* Takes ~58% of the actions tab content width */
    overflow-y: auto; /* Scroll if content overflows */
    height: 100%; /* Fill height of #actions-content */
    padding: 8px; /* Consistent padding */
    border: 1px solid #b0b0b0;
    background-color: #fdfdfd;
    box-sizing: border-box;
    border-radius: 4px;
    scrollbar-width: thin;
    scrollbar-color: #999 #e0e0e0;
}

#action-controls-wrapper::-webkit-scrollbar {
    width: 8px;
}
#action-controls-wrapper::-webkit-scrollbar-track {
    background: #e0e0e0;
    border-radius: 4px;
}
#action-controls-wrapper::-webkit-scrollbar-thumb {
    background-color: #999;
    border-radius: 4px;
    border: 2px solid #e0e0e0;
}
#action-controls-wrapper::-webkit-scrollbar-thumb:hover {
    background-color: #777;
}

/* Styles for sections within #action-controls-wrapper (e.g., world map, current location) */
#action-controls-wrapper .action-box-section {
    background-color: #fff; /* Cleaner background */
    border: 1px solid #ddd; /* Softer border */
    border-radius: 4px; /* Rounded corners */
    padding: 8px; /* Consistent padding */
    margin-bottom: 8px; /* Spacing between sections */
    box-shadow: 0 1px 2px rgba(0,0,0,0.05); /* Subtle shadow */
}
#action-controls-wrapper .action-box-section:last-child {
    margin-bottom: 0; /* No margin for the last section */
}


/* General form styling, adapted for #action-controls-wrapper context */
#action-controls-wrapper form div {
    margin-bottom: 8px;
}

#action-controls-wrapper label {
    display: block;
    margin-bottom: 4px;
    font-weight: bold;
    font-size: 0.8em; /* Slightly smaller labels */
}

#action-controls-wrapper input[type="text"],
#action-controls-wrapper input[type="number"] {
    width: calc(100% - 16px); /* Adjust for padding */
    padding: 6px 8px; /* Smaller padding */
    border: 1px solid #ccc;
    border-radius: 3px;
    box-sizing: border-box;
    margin-bottom: 8px; /* Consistent margin */
    font-size: 0.85em;
}

#action-controls-wrapper input[type="submit"],
#action-controls-wrapper .submit-details-button, /* Generic class for submit buttons */
#action-controls-wrapper .map-destination-button,
#action-controls-wrapper .sub-location-button,
#action-controls-wrapper .action-button,
#action-controls-wrapper .general-action-button { /* General class for other buttons */
    background-color: #5cb85c;
    color: white;
    padding: 6px 10px; /* Adjusted padding */
    border: none;
    border-radius: 3px;
    cursor: pointer;
    font-size: 0.85em; /* Consistent font size */
    margin-right: 5px; /* Spacing for multiple buttons */
    margin-bottom: 5px;
    text-align: center; /* Center text in buttons */
}
#action-controls-wrapper input[type="submit"]:hover,
#action-controls-wrapper .submit-details-button:hover,
#action-controls-wrapper .map-destination-button:hover,
#action-controls-wrapper .sub-location-button:hover,
#action-controls-wrapper .action-button:hover,
#action-controls-wrapper .general-action-button:hover {
    opacity: 0.9; /* Slight hover effect */
}

/* Specific button type styling */
#action-controls-wrapper .map-destination-button { background-color: #007bff; }
#action-controls-wrapper .sub-location-button { background-color: #28a745; }
#action-controls-wrapper .action-button { background-color: #ffc107; color: #333; }
#action-controls-wrapper .submit-details-button { background-color: #17a2b8; }
#action-controls-wrapper .general-action-button { background-color: #6c757d; }

#action-controls-wrapper ul {
    list-style-type: none;
    padding-left: 0;
    margin-top: 4px;
    margin-bottom: 8px;
}

#action-controls-wrapper ul li {
    padding: 2px 0;
    font-size: 0.85em;
}

#action-controls-wrapper hr {
    border: 0;
    height: 1px;
    background: #eee; /* Lighter hr */
    margin: 15px 0; /* Reduced margin */
}

/* Headings within #action-controls-wrapper */
#action-controls-wrapper h1, /* If any h1 are used */
#action-controls-wrapper h2,
#action-controls-wrapper h3,
#action-controls-wrapper h4 {
    color: #333;
    margin-top: 0; /* Remove default top margin */
    margin-bottom: 8px; /* Consistent bottom margin */
    padding-bottom: 4px; /* Space before border */
    border-bottom: 1px solid #eee; /* Subtle separator */
}
#action-controls-wrapper h1 { font-size: 1.2em; }
#action-controls-wrapper h2 { font-size: 1.1em; }
#action-controls-wrapper h3 { font-size: 1.0em; }
#action-controls-wrapper h4 { font-size: 0.9em; border-bottom: none; margin-bottom: 4px;} /* No border for h4 */

#action-controls-wrapper #current-town-display {
    font-weight: bold;
    color: #28a745;
    font-size: 0.9em;
}
#action-controls-wrapper .sub-location-description {
    font-size: 0.8em;
    color: #555;
    margin-left: 10px;
    display: block;
}
#action-controls-wrapper input[type="hidden"] {
    display: none;
}

/* Details section within action controls */
#action-controls-wrapper #action-details-container { /* If this specific ID is still used */
    border-top: 1px dashed #ccc; /* Lighter border */
    padding-top: 10px;
    margin-top: 10px;
}
#action-controls-wrapper .hidden-details { display: none; }
#action-controls-wrapper .details-section { /* Generic class for sections like buy/sell forms */
    background-color: #fdfdfd; /* Slightly off-white */
    border: 1px solid #e0e0e0;
    border-radius: 3px;
    padding: 10px; /* Consistent padding */
    margin-top: 8px;
}
#action-controls-wrapper .details-section h4 {
    margin-bottom: 8px; /* Space after heading in details section */
    font-size: 0.9em;
    border-bottom: 1px solid #f0f0f0;
    padding-bottom: 4px;
}
#action-controls-wrapper .details-section label {
    font-size: 0.8em;
}


/* Content styling for Stats, Info, Inventory tabs */
#stats-content h2, #info-content h2, #inventory-content h2:first-child {
    font-size: 1.0em;
    margin-top: 0;
    margin-bottom: 8px;
    color: #333;
    text-align: left;
    padding: 2px 0;
    border-bottom: 1px solid #ddd;
}
#inventory-content h2 { /* Subsequent h2 in inventory */
    font-size: 1.0em;
    margin-top: 10px;
    margin-bottom: 6px;
    border-bottom: 1px solid #ddd;
    padding-bottom: 3px;
}

#stats-content p, #info-content p, #inventory-content p {
    font-size: 0.85em; /* Slightly smaller text */
    margin: 4px 0;
    color: #444;
    text-align: left;
    word-wrap: break-word;
}

#stats-content ul, #info-content ul, #inventory-content ul {
    padding-left: 10px; /* Indent list */
    margin-bottom: 8px;
    list-style-type: disc; /* Use standard bullets */
}

#stats-content li, #info-content li, #inventory-content li {
    font-size: 0.8em; /* Smaller list item text */
    padding: 1px 0;
    color: #555;
    text-align: left;
    word-wrap: break-word;
    margin-bottom: 2px; /* Space between list items */
}

#inventory-content p.empty-message { /* For "Inventory is empty" type messages */
    font-style: italic;
    color: #777;
}

/* Remove duplicated/obsolete general rules */
/* The old .container, .log-action-container etc. are assumed to be removed from HTML or will be styled if used within tabs */
/* The specific #stats-tab, #inventory-tab, #actions-tab fixed px widths from older versions are removed */
/* The multiple html, body definitions are consolidated at the top */
/* The multiple .game-container definitions are consolidated */

/* Modal styles - Transferred and Refined */
.modal { /* Targets #subLocationActionsModal */
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1050; /* Higher than most elements, adjust if needed (e.g. Bootstrap modals are often 1050) */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if modal content is too long */
    background-color: rgba(0,0,0,0.5); /* Slightly darker backdrop */
}

.modal-content { /* Class for the content area of the modal */
    background-color: #fefefe;
    /* margin: 15% auto; /* Replaced with transform for better centering */
    position: fixed; /* Changed to fixed for transform centering */
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    padding: 25px; /* Increased padding */
    border: 1px solid #888;
    border-radius: 8px; /* Added border-radius */
    width: 90%; /* Responsive width */
    max-width: 450px; /* Slightly increased max-width */
    box-shadow: 0 5px 15px rgba(0,0,0,0.3); /* Enhanced box-shadow */
}

.modal-content h3 { /* Styling for heading within modal */
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 1.5em;
    color: #333;
    border-bottom: 1px solid #eee;
    padding-bottom: 10px;
}

.close-button { /* For the 'X' button */
    color: #555; /* Darker for better visibility */
    position: absolute; /* Position relative to modal-content */
    top: 10px; /* Adjusted position */
    right: 15px; /* Adjusted position */
    font-size: 32px; /* Larger size */
    font-weight: bold;
    line-height: 1; /* Ensure proper vertical alignment */
}

.close-button:hover,
.close-button:focus {
    color: #000; /* Black on hover/focus */
    text-decoration: none;
    cursor: pointer;
}

#modal-actions-list {
    margin-top: 15px; /* Space above the buttons list */
    display: flex;
    flex-direction: column;
    gap: 12px; /* Space between action buttons */
}

#modal-actions-list ul { /* If an UL is still used, though direct buttons are more likely with flex */
    list-style-type: none;
    padding: 0;
    margin: 0; /* Reset margin if UL is present */
    display: flex;
    flex-direction: column;
    gap: 12px; /* Space between li elements if ul is used */
}

#modal-actions-list li { /* If an LI is still used */
    margin-bottom: 0; /* Handled by gap in parent (ul or #modal-actions-list) */
}

/* Styling for buttons specifically within the modal, using .action-button class */
/* This ensures consistency if .action-button is used elsewhere but needs specific modal styling */
.modal #modal-actions-list .action-button {
    width: 100%;
    padding: 12px 15px; /* Generous padding */
    background-color: #007bff; /* Primary blue */
    color: white;
    border: none;
    border-radius: 5px; /* Slightly more rounded */
    cursor: pointer;
    font-size: 1em; /* Clear font size */
    text-align: center;
    transition: background-color 0.2s ease-in-out;
}

.modal #modal-actions-list .action-button:hover {
    background-color: #0056b3; /* Darker blue on hover */
}
